"use strict";(self.webpackChunkalfi=self.webpackChunkalfi||[]).push([[3604],{170:e=>{e.exports=JSON.parse('{"permalink":"/blog/pfe-ansible","editUrl":"https://github.com/alfi67-git/alfi-website/blog/blog/pfe/2025/index.md","source":"@site/blog/pfe/2025/index.md","title":"\ud83c\udf93 Projet de Fin d\'\xc9tude 3e ann\xe9e | D\xe9ploiement automatique de config switch avec Ansible","description":"Rebelote, pour la validation de ma 3e ann\xe9e d\'\xe9tude, je dois r\xe9aliser un nouveau projet. Cette fois-ci \xe7a sera sur l\'automatisation du d\xe9ploiement de fichier de configuration de switch \xe0 l\'aide d\'Ansible.","date":"2025-02-04T19:02:00.000Z","tags":[{"inline":false,"label":"CESI","permalink":"/blog/tags/cesi","description":"Tous les articles en rapport \xe0 l\'\xe9cole CESI."},{"inline":false,"label":"PFE","permalink":"/blog/tags/pfe","description":"Tous les articles concernant mes projets de fin d\'\xe9tude."}],"readingTime":4.09,"hasTruncateMarker":true,"authors":[{"name":"Alexandre FIDALGO","title":"J\'fais des trucs sur mon pc et mes serveurs","socials":{"github":"https://github.com/alfi67-git","linkedin":"https://www.linkedin.com/in/alexandre-fidalgo/","email":"mailto:a.fidalgo.contact@gmail.com"},"imageURL":"https://github.com/alfi67-git.png","key":"alfi","page":null}],"frontMatter":{"slug":"pfe-ansible","title":"\ud83c\udf93 Projet de Fin d\'\xc9tude 3e ann\xe9e | D\xe9ploiement automatique de config switch avec Ansible","authors":["alfi"],"tags":["cesi","pfe"],"date":"2025-02-04T19:02"},"unlisted":false,"nextItem":{"title":"\ud83d\udee0\ufe0f Installer et monitorer un serveur minecraft avec Crafty Controller","permalink":"/blog/crafty"}}')},2418:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>c});var i=s(170),r=s(4848),t=s(8453);const l={slug:"pfe-ansible",title:"\ud83c\udf93 Projet de Fin d'\xc9tude 3e ann\xe9e | D\xe9ploiement automatique de config switch avec Ansible",authors:["alfi"],tags:["cesi","pfe"],date:"2025-02-04T19:02"},o=void 0,a={authorsImageUrls:[void 0]},c=[{value:"Technologies utilis\xe9es",id:"technologies-utilis\xe9es",level:2},{value:"\ud83d\udd17 Git, c&#39;est quoi ?",id:"-git-cest-quoi-",level:3},{value:"\u2699\ufe0f Ansible, c&#39;est quoi ?",id:"\ufe0f-ansible-cest-quoi-",level:3},{value:"Comment \xe7a marche ?",id:"comment-\xe7a-marche-",level:4},{value:"Premiers test",id:"premiers-test",level:2},{value:"\ud83d\udda5 Configuration minimale (3 VMs)",id:"-configuration-minimale-3-vms",level:4},{value:"\ud83c\udfd7 Configuration recommand\xe9e (4+ VMs)",id:"-configuration-recommand\xe9e-4-vms",level:4},{value:"\ud83d\udccc Le lab :",id:"-le-lab-",level:3},{value:"\ud83c\udf10 IP du lab :",id:"-ip-du-lab-",level:3},{value:"\ud83d\udca1 Infos sur Ansible :",id:"-infos-sur-ansible-",level:3}];function d(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Rebelote, pour la validation de ma 3e ann\xe9e d'\xe9tude, je dois r\xe9aliser un nouveau projet. Cette fois-ci \xe7a sera sur l'automatisation du d\xe9ploiement de fichier de configuration de switch \xe0 l'aide d'Ansible."}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"Cet article est encore en cours de r\xe9daction, le projet venant juste de commenc\xe9. N'h\xe9sitez pas \xe0 revenir plus tard pour voir l'\xe9volution du projet."})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"Ce projet doit permettre :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"L'automatisation de d\xe9ploiement de script de configuration de switch"}),"\n",(0,r.jsx)(n.li,{children:"La mise \xe0 jour automatique des fichiers de conf"}),"\n",(0,r.jsx)(n.li,{children:"Sauvegarder les fichiers de configuration sur Git"}),"\n",(0,r.jsx)(n.li,{children:"Permettre le rollback en cas de d\xe9faillance"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"technologies-utilis\xe9es",children:"Technologies utilis\xe9es"}),"\n",(0,r.jsx)(n.h3,{id:"-git-cest-quoi-",children:"\ud83d\udd17 Git, c'est quoi ?"}),"\n",(0,r.jsxs)(n.p,{children:["Git est un ",(0,r.jsx)(n.strong,{children:"syst\xe8me de gestion de versions"})," qui permet de ",(0,r.jsx)(n.strong,{children:"suivre l\u2019\xe9volution des fichiers"})," dans un projet, principalement du code source."]}),"\n",(0,r.jsx)(n.p,{children:"Avec Git, tu peux :"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Sauvegarder et suivre les modifications"})," d\u2019un projet au fil du temps"]}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Revenir \xe0 une version pr\xe9c\xe9dente"})," en cas d\u2019erreur"]}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Travailler \xe0 plusieurs"})," sans \xe9craser les modifications des autres"]}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Exp\xe9rimenter avec des branches"})," avant d\u2019int\xe9grer des changements dans le projet principal"]}),"\n",(0,r.jsxs)(n.p,{children:["Git est un outil ",(0,r.jsx)(n.strong,{children:"distribu\xe9"}),", c\u2019est-\xe0-dire que ",(0,r.jsx)(n.strong,{children:"chaque copie du projet contient tout l\u2019historique des modifications"}),", sans d\xe9pendre d\u2019un serveur central."]}),"\n",(0,r.jsx)(n.h3,{id:"\ufe0f-ansible-cest-quoi-",children:"\u2699\ufe0f Ansible, c'est quoi ?"}),"\n",(0,r.jsxs)(n.p,{children:["Ansible est un ",(0,r.jsx)(n.strong,{children:"outil d'automatisation"})," qui permet de ",(0,r.jsx)(n.strong,{children:"g\xe9rer des serveurs, installer des logiciels et configurer des syst\xe8mes"})," de mani\xe8re simple et efficace."]}),"\n",(0,r.jsx)(n.p,{children:"Avec Ansible, tu peux :"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"G\xe9rer plusieurs machines en m\xeame temps"})," avec un seul script"]}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Automatiser les t\xe2ches r\xe9p\xe9titives"})," comme l\u2019installation de logiciels"]}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"\xc9viter les erreurs humaines"})," gr\xe2ce \xe0 des configurations reproductibles"]}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Utiliser un syst\xe8me sans agent"}),", car Ansible fonctionne via ",(0,r.jsx)(n.strong,{children:"SSH"})," (pour Linux) et ",(0,r.jsx)(n.strong,{children:"WinRM"})," (pour Windows)"]}),"\n",(0,r.jsxs)(n.p,{children:["Ansible est ",(0,r.jsx)(n.strong,{children:"d\xe9claratif"}),' : tu \xe9cris ce que tu veux obtenir (ex: "Apache install\xe9"), et il s\u2019occupe du comment.']}),"\n",(0,r.jsx)(n.h4,{id:"comment-\xe7a-marche-",children:"Comment \xe7a marche ?"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Machine de contr\xf4le"})," : Un serveur o\xf9 Ansible est install\xe9 (peut \xeatre ton PC ou un serveur d\xe9di\xe9)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Machines cibles"})," : Serveurs \xe0 configurer, accessibles en SSH."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Inventaire"})," : Un fichier listant les machines cibles."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Playbooks"})," : Scripts YAML d\xe9finissant les actions \xe0 ex\xe9cuter (installer un package, modifier un fichier, red\xe9marrer un service, etc.)."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"- name: Installer Apache\n  hosts: webservers\n  become: yes  # Ex\xe9cuter en tant que root\n  tasks:\n    - name: Installer le package Apache\n      apt:\n        name: apache2\n        state: present\n"})}),"\n",(0,r.jsx)(n.p,{children:"\ud83d\udc49 Ici, Ansible va se connecter aux machines du groupe webservers et installer Apache."}),"\n",(0,r.jsx)(n.p,{children:"Pour rentrer un peu plus dans les d\xe9tails, Ansible automatise la gestion des syst\xe8mes distants et contr\xf4le leur \xe9tat souhait\xe9."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"control node ansible",src:s(2783).A+"",width:"597",height:"534"})}),"\n",(0,r.jsx)(n.p,{children:"Comme montr\xe9 dans la figure pr\xe9c\xe9dente, la plupart des environnements Ansible comportent trois composants principaux :"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"N\u0153ud de contr\xf4le :"})}),"\n",(0,r.jsxs)(n.p,{children:["Un syst\xe8me sur lequel Ansible est install\xe9. Vous ex\xe9cutez les commandes Ansible telles que ",(0,r.jsx)(n.code,{children:"ansible"})," ou ",(0,r.jsx)(n.code,{children:"ansible-inventory"})," sur un n\u0153ud de contr\xf4le."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Inventaire :"})}),"\n",(0,r.jsx)(n.p,{children:"Une liste de n\u0153uds g\xe9r\xe9s qui sont organis\xe9s de mani\xe8re logique. Vous cr\xe9ez un inventaire sur le n\u0153ud de contr\xf4le pour d\xe9crire les d\xe9ploiements d'h\xf4tes \xe0 Ansible."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"N\u0153ud g\xe9r\xe9 :"})}),"\n",(0,r.jsx)(n.p,{children:"Un syst\xe8me distant, ou h\xf4te, qu'Ansible contr\xf4le."}),"\n",(0,r.jsx)(n.h2,{id:"premiers-test",children:"Premiers test"}),"\n",(0,r.jsx)(n.p,{children:"Etant donn\xe9e que c'est la premi\xe8re fois que j'utilise Ansible, il faut bien que je puisse me faire la main dessus et comprendre comment \xe7a fonctionne. Pour ce faire j'ai donc cr\xe9er un petit lab de VMs sur VMware Workstation."}),"\n",(0,r.jsx)(n.p,{children:"Pour r\xe9aliser ce lab j'ai donc poser la question \xe0 ChatGPT de m'en proposer une et voici sa r\xe9ponse :"}),"\n",(0,r.jsx)(n.h4,{id:"-configuration-minimale-3-vms",children:"\ud83d\udda5 Configuration minimale (3 VMs)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"1 VM de contr\xf4le"})," (o\xf9 Ansible est install\xe9)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"2 VMs cibles"})," (serveurs g\xe9r\xe9s par Ansible)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,r.jsx)(n.strong,{children:"Pourquoi ce setup ?"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"1 machine pour ex\xe9cuter Ansible"}),"\n",(0,r.jsx)(n.li,{children:"2 machines cibles pour tester l'ex\xe9cution sur plusieurs serveurs"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"-configuration-recommand\xe9e-4-vms",children:"\ud83c\udfd7 Configuration recommand\xe9e (4+ VMs)"}),"\n",(0,r.jsx)(n.p,{children:"Si tu veux tester diff\xe9rents r\xf4les et services, voici une config plus avanc\xe9e :"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:'1 VM "Control Node"'})," (Fedora/Debian/Ubuntu) \u2192 Contient Ansible"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:'1 VM "Web Server"'})," (Ubuntu/Debian/CentOS) \u2192 Pour tester le d\xe9ploiement d\u2019Apache/Nginx"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:'1 VM "Database Server"'})," (Ubuntu/Debian/CentOS) \u2192 Pour tester l\u2019installation de MySQL/PostgreSQL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:'1 VM "Client"'})," (Fedora/Debian) \u2192 Pour tester la connexion aux services"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-le-lab-",children:"\ud83d\udccc Le lab :"}),"\n",(0,r.jsx)(n.p,{children:"Voici donc l'\xe9tat du lab actuellement :"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"1 VM de contr\xf4le"})," (OS Fedora Server o\xf9 Ansible est install\xe9)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"2 VMs cibles"})," (OS Debian serveurs g\xe9r\xe9s par Ansible)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\ud83d\udc49 ",(0,r.jsx)(n.strong,{children:"Pourquoi ce setup ?"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"1 machine pour ex\xe9cuter Ansible"}),"\n",(0,r.jsx)(n.li,{children:"2 machines cibles pour tester l'ex\xe9cution sur plusieurs serveurs"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-ip-du-lab-",children:"\ud83c\udf10 IP du lab :"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"vm-fedo-ansible \u2192"})," 192.168.2.134"]}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"vm-deb-ansible   \u2192"})," 192.168.2.135"]}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"vm-deb-ansible2 \u2192"})," 192.168.2.136"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"15629187859594_Capture d\u2019e\xb4cran 2019-07-12 a` 10.05.31.png",src:s(9753).A+"",width:"1440",height:"808"})}),"\n",(0,r.jsx)(n.h3,{id:"-infos-sur-ansible-",children:"\ud83d\udca1 Infos sur Ansible :"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"15629296318823_Plan de travail 12@2x.png",src:s(8746).A+"",width:"2001",height:"326"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Un ",(0,r.jsx)(n.strong,{children:"node manager"}),", ou ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"control node"})}),",  est un poste qui contr\xf4le les nodes gr\xe2ce \xe0 sa connexion SSH. Il\xa0dispose d'une version Ansible d\u2019install\xe9 pour leur pousser les t\xe2ches d\u2019automatisation gr\xe2ce aux commandes\xa0",(0,r.jsx)(n.code,{children:"ansible"}),"\xa0et\xa0",(0,r.jsx)(n.code,{children:"ansible-playbook"}),". \xc7a peut \xeatre n\u2019importe quelle machine Linux, mais pas Windows."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"15629302942908_Plan de travail 12 copie 4@2x.png",src:s(3675).A+"",width:"2001",height:"326"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Un ",(0,r.jsx)(n.strong,{children:"node"})," (ou ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"managed node"})}),", ou ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"host"})}),") est un poste connect\xe9 au node manager en SSH, et sur lequel Ansible viendra pousser les t\xe2ches d\u2019automatisation. Ansible n\u2019est pas install\xe9 sur les nodes."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},2783:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/ansible_inv_start-54b1e82cceb72991edbb9f6df1ff15ac.svg"},3675:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/15629302942908_Plan_de_travail_12_copie_42x-c95da2e47586c99ec68875bbb7c5ec42.png"},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(6540);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},8746:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/15629296318823_Plan_de_travail_122x-1f277e178ea78c36aec89ed89c3a331b.png"},9753:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/15629187859594_Capture_decran_2019-07-12_a_10.05.31-43fbfe92ac4344be4e74ae5e0a8dba78.png"}}]);