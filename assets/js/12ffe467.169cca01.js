"use strict";(self.webpackChunkalfi=self.webpackChunkalfi||[]).push([[8804],{6590:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"ansible","title":"Ansible","description":"\u2699\ufe0f Ansible, c\'est quoi ?","source":"@site/docs/ansible.md","sourceDirName":".","slug":"/ansible","permalink":"/docs/ansible","draft":false,"unlisted":false,"editUrl":"https://github.com/alfi67-git/alfi-website/docs/docs/ansible.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Translate your site","permalink":"/docs/docusaurus/tutorial-extras/translate-your-site"},"next":{"title":"Commandes de base SQL","permalink":"/docs/commande_de_base_sql"}}');var l=s(4848),a=s(8453);const r={},t="Ansible",c={},d=[{value:"\u2699\ufe0f Ansible, c&#39;est quoi ?",id:"\ufe0f-ansible-cest-quoi-",level:2},{value:"\ud83c\udfd7 Les concepts de base",id:"-les-concepts-de-base",level:2},{value:"\ud83d\udee0 Les commandes Ansible essentielles",id:"-les-commandes-ansible-essentielles",level:2},{value:"Configuration d\u2019Ansible",id:"configuration-dansible",level:3},{value:"Gather facts",id:"gather-facts",level:3},{value:"V\xe9rifier la connexion aux machines",id:"v\xe9rifier-la-connexion-aux-machines",level:3},{value:"Ex\xe9cuter une commande sur une machine distante",id:"ex\xe9cuter-une-commande-sur-une-machine-distante",level:3},{value:"Installer un paquet avec Ansible",id:"installer-un-paquet-avec-ansible",level:3},{value:"Lancer un playbook Ansible",id:"lancer-un-playbook-ansible",level:3},{value:"Installer Nginx",id:"installer-nginx",level:3}];function o(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"ansible",children:"Ansible"})}),"\n",(0,l.jsx)(n.h2,{id:"\ufe0f-ansible-cest-quoi-",children:"\u2699\ufe0f Ansible, c'est quoi ?"}),"\n",(0,l.jsxs)(n.p,{children:["Ansible est un ",(0,l.jsx)(n.strong,{children:"outil d'automatisation"})," qui permet de ",(0,l.jsx)(n.strong,{children:"g\xe9rer des serveurs, installer des logiciels et configurer des syst\xe8mes"})," de mani\xe8re simple et efficace."]}),"\n",(0,l.jsx)(n.p,{children:"Avec Ansible, tu peux :"}),"\n",(0,l.jsxs)(n.p,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"G\xe9rer plusieurs machines en m\xeame temps"})," avec un seul script"]}),"\n",(0,l.jsxs)(n.p,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Automatiser les t\xe2ches r\xe9p\xe9titives"})," comme l\u2019installation de logiciels"]}),"\n",(0,l.jsxs)(n.p,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"\xc9viter les erreurs humaines"})," gr\xe2ce \xe0 des configurations reproductibles"]}),"\n",(0,l.jsxs)(n.p,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Utiliser un syst\xe8me sans agent"}),", car Ansible fonctionne via ",(0,l.jsx)(n.strong,{children:"SSH"})," (pour Linux) et ",(0,l.jsx)(n.strong,{children:"WinRM"})," (pour Windows)"]}),"\n",(0,l.jsxs)(n.p,{children:["Ansible est ",(0,l.jsx)(n.strong,{children:"d\xe9claratif"}),' : tu \xe9cris ce que tu veux obtenir (ex: "Apache install\xe9"), et il s\u2019occupe du comment.']}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-les-concepts-de-base",children:"\ud83c\udfd7 Les concepts de base"}),"\n",(0,l.jsxs)(n.p,{children:["\ud83d\udd39 ",(0,l.jsx)(n.strong,{children:"Inventaire"})," : Un fichier listant les machines \xe0 g\xe9rer (ex: ",(0,l.jsx)(n.code,{children:"hosts.ini"}),")."]}),"\n",(0,l.jsxs)(n.p,{children:["\ud83d\udd39 ",(0,l.jsx)(n.strong,{children:"Module"})," : Un composant pr\xe9fait pour ex\xe9cuter une t\xe2che (ex: ",(0,l.jsx)(n.code,{children:"apt"}),", ",(0,l.jsx)(n.code,{children:"yum"}),", ",(0,l.jsx)(n.code,{children:"win_chocolatey"}),")."]}),"\n",(0,l.jsxs)(n.p,{children:["\ud83d\udd39 ",(0,l.jsx)(n.strong,{children:"Playbook"})," : Un fichier YAML qui d\xe9crit un ensemble de t\xe2ches \xe0 ex\xe9cuter."]}),"\n",(0,l.jsxs)(n.p,{children:["\ud83d\udd39 ",(0,l.jsx)(n.strong,{children:"R\xf4le"})," : Une organisation plus avanc\xe9e des playbooks pour les projets complexes."]}),"\n",(0,l.jsxs)(n.p,{children:["\ud83d\udd39 ",(0,l.jsx)(n.strong,{children:"Idempotence"})," : Si une action est d\xe9j\xe0 en place, Ansible ne la refait pas inutilement."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"-les-commandes-ansible-essentielles",children:"\ud83d\udee0 Les commandes Ansible essentielles"}),"\n",(0,l.jsx)(n.h3,{id:"configuration-dansible",children:"Configuration d\u2019Ansible"}),"\n",(0,l.jsx)(n.p,{children:"Cette commande permet de cr\xe9er le fichier de configuration d\u2019Ansible qui sera pr\xe9sent dans la racine du projet :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ansible-config init --disabled > ansible.cfg\n"})}),"\n",(0,l.jsx)(n.h3,{id:"gather-facts",children:"Gather facts"}),"\n",(0,l.jsx)(n.p,{children:"r\xe9cup\xe8re les informations de la machine cible. Par exemple :"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"L\u2019OS"}),"\n",(0,l.jsx)(n.li,{children:"L\u2019IP"}),"\n",(0,l.jsx)(n.li,{children:"La RAM"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'- name: Show OS and IP\n  hosts: all\n  gather_facts: yes\n  tasks:\n    - name: Display OS and IP\n      ansible.builtin.debug:\n        msg: "OS: {{ ansible_distribution }}, IP: {{ ansible_default_ipv4.address }}"\n'})}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,l.jsxs)(n.strong,{children:["Sans ",(0,l.jsx)(n.code,{children:"gather_facts: yes"})]}),", ces variables ne seraient pas disponibles, sauf si tu les collectes manuellement avec le module ",(0,l.jsx)(n.code,{children:"setup"}),"."]})}),"\n",(0,l.jsx)(n.h3,{id:"v\xe9rifier-la-connexion-aux-machines",children:"V\xe9rifier la connexion aux machines"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ansible -i hosts.ini all -m ping\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u27a1\ufe0f V\xe9rifie si Ansible peut acc\xe9der aux machines via SSH."}),"\n",(0,l.jsx)(n.h3,{id:"ex\xe9cuter-une-commande-sur-une-machine-distante",children:"Ex\xe9cuter une commande sur une machine distante"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'ansible -i hosts.ini web -m shell -a "uptime"\n'})}),"\n",(0,l.jsxs)(n.p,{children:["\u27a1\ufe0f Ex\xe9cute la commande ",(0,l.jsx)(n.code,{children:"uptime"})," sur les serveurs du groupe ",(0,l.jsx)(n.code,{children:"web"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"installer-un-paquet-avec-ansible",children:"Installer un paquet avec Ansible"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'ansible -i hosts.ini web -m apt -a "name=nginx state=present" --become\n'})}),"\n",(0,l.jsxs)(n.p,{children:["\u27a1\ufe0f Installe Nginx sur les machines du groupe ",(0,l.jsx)(n.code,{children:"web"})," (avec ",(0,l.jsx)(n.code,{children:"apt"})," pour Debian/Ubuntu)."]}),"\n",(0,l.jsx)(n.h3,{id:"lancer-un-playbook-ansible",children:"Lancer un playbook Ansible"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ansible-playbook -i hosts.ini install_nginx.yml\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u27a1\ufe0f Ex\xe9cute un fichier YAML qui installe et configure un service."}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.admonition,{title:"\ud83d\udccc exemple de playbook",type:"tip",children:[(0,l.jsx)(n.h3,{id:"installer-nginx",children:"Installer Nginx"}),(0,l.jsxs)(n.p,{children:["Cr\xe9e un fichier ",(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.code,{children:"install_nginx.yml"})})," :"]}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",metastring:'title="install_nginx.yml"',children:"- name: Installer et d\xe9marrer Nginx\n  hosts: web\n  become: yes\n  tasks:\n    - name: Mettre \xe0 jour la liste des paquets\n      apt:\n        update_cache: yes\n\n    - name: Installer Nginx\n      apt:\n        name: nginx\n        state: present\n\n    - name: D\xe9marrer Nginx\n      service:\n        name: nginx\n        state: started\n"})}),(0,l.jsx)(n.p,{children:"Puis ex\xe9cute-le :"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"ansible-playbook -i hosts.ini install_nginx.yml\n"})}),(0,l.jsxs)(n.p,{children:["\u27a1\ufe0f R\xe9sultat : Nginx est install\xe9 et lanc\xe9 sur tous les serveurs du groupe ",(0,l.jsx)(n.code,{children:"web"})," ! \ud83d\ude80"]})]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>t});var i=s(6540);const l={},a=i.createContext(l);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);