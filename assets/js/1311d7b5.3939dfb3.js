"use strict";(self.webpackChunkalfi=self.webpackChunkalfi||[]).push([[9053],{747:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/server-builder2-b5d6f36fe846c69863345c0163227763.png"},2967:e=>{e.exports=JSON.parse('{"permalink":"/blog/crafty","editUrl":"https://github.com/alfi67-git/alfi-website/tree/main/blog/blog/projet-perso/crafty/index.md","source":"@site/blog/projet-perso/crafty/index.md","title":"\ud83d\udee0\ufe0f Installer et monitorer un serveur minecraft avec Crafty Controller","description":"Aujourd\'hui, on va voir comment installer un serveur Minecraft et le monitorer avec une interface web nomm\xe9 Crafty Controller le tout fonctionnant sous Docker install\xe9 sur un serveur Debian.","date":"2024-11-19T15:05:12.000Z","tags":[{"inline":false,"label":"Docker","permalink":"/blog/tags/docker","description":"Docker tag description."},{"inline":false,"label":"Minecraft","permalink":"/blog/tags/minecraft","description":"Tous les articles en lien avec Minecraft."},{"inline":false,"label":"Projets personnels","permalink":"/blog/tags/projets","description":"Mes p\'tits projets perso, c\'est ici."}],"readingTime":5.16,"hasTruncateMarker":true,"authors":[{"name":"Alexandre FIDALGO","title":"J\'fais des trucs sur mon pc et mes serveurs","socials":{"github":"https://github.com/alfi67-git","linkedin":"https://www.linkedin.com/in/alexandre-fidalgo/","email":"mailto:a.fidalgo.contact@gmail.com"},"imageURL":"https://github.com/alfi67-git.png","key":"alfi","page":null}],"frontMatter":{"slug":"crafty","title":"\ud83d\udee0\ufe0f Installer et monitorer un serveur minecraft avec Crafty Controller","authors":["alfi"],"tags":["docker","minecraft","projets"],"date":"2024-11-19T15:05:12.000Z"},"unlisted":false,"prevItem":{"title":"\ud83c\udf93 Projet de Fin d\'\xc9tude 3e ann\xe9e | D\xe9ploiement automatique de config switch avec Ansible","permalink":"/blog/pfe-ansible"},"nextItem":{"title":"\ud83c\udf93 Projet de Fin d\'\xc9tude | Utilisation de Postman","permalink":"/blog/pfe-premier-pas"}}')},3432:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/crafty_ui-0b366bd7703fdb45881e79d14de53243.png"},4803:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var i=n(2967),s=n(4848),t=n(8453);const a={slug:"crafty",title:"\ud83d\udee0\ufe0f Installer et monitorer un serveur minecraft avec Crafty Controller",authors:["alfi"],tags:["docker","minecraft","projets"],date:new Date("2024-11-19T15:05:12.000Z")},o=void 0,c={authorsImageUrls:[void 0]},l=[{value:"Les outils utilis\xe9s",id:"les-outils-utilis\xe9s",level:2},{value:"C&#39;est quoi Docker ?",id:"cest-quoi-docker-",level:3},{value:"C&#39;est quoi Crafty ?",id:"cest-quoi-crafty-",level:3},{value:"Installation",id:"installation",level:2},{value:"Interface de Crafty",id:"interface-de-crafty",level:2},{value:"Premi\xe8re connexion",id:"premi\xe8re-connexion",level:3},{value:"Dashboard",id:"dashboard",level:3},{value:"Cr\xe9ation d&#39;un serveur",id:"cr\xe9ation-dun-serveur",level:3},{value:"D\xe9marrage du serveur",id:"d\xe9marrage-du-serveur",level:3}];function d(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.p,{children:["Aujourd'hui, on va voir comment installer un serveur Minecraft et le monitorer avec une interface web nomm\xe9 ",(0,s.jsx)(r.em,{children:"Crafty Controller"})," le tout fonctionnant sous Docker install\xe9 sur un serveur Debian."]}),"\n",(0,s.jsx)(r.h2,{id:"les-outils-utilis\xe9s",children:"Les outils utilis\xe9s"}),"\n",(0,s.jsxs)(r.h3,{id:"cest-quoi-docker-",children:["C'est quoi ",(0,s.jsx)(r.a,{href:"https://docker.com",children:"Docker"})," ?"]}),"\n",(0,s.jsx)(r.p,{children:"Pour faire ultra simple, docker est une application de virtualisation.\nDe la m\xeame fa\xe7on que l'on peut virtualiser des Syst\xe8mes d'Exploitations, avec VirtualBox, VMware, etc, avec Docker on peut virtualiser des applications.\nUtiliser Docker \xe0 plusieurs avantages pour ce projet:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Se d\xe9ployer rapidement"}),"\n",(0,s.jsx)(r.li,{children:"Isoler l'environnements"}),"\n",(0,s.jsx)(r.li,{children:"La portabilit\xe9"}),"\n"]}),"\n",(0,s.jsxs)(r.h3,{id:"cest-quoi-crafty-",children:["C'est quoi ",(0,s.jsx)(r.a,{href:"https://craftycontrol.com",children:"Crafty"})," ?"]}),"\n",(0,s.jsxs)(r.p,{children:["Crafty Controller, ou comme je l'appelle plus simplement ",(0,s.jsx)(r.em,{children:"Crafty"}),", est un projet gratuit et open-source, qui permet, \xe0 l'aide d'une interface web, d'administrer un ou plusieurs serveur Minecraft."]}),"\n",(0,s.jsx)(r.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(r.p,{children:"C'est possible d'installer Crafty de diff\xe9rentes fa\xe7ons. Soit directement sur le syst\xe8me (mais c'est chiant et \xe0 g\xe9rer c'est un bordel, je le sais d'exp\xe9rience) ou avec Docker et docker compose (qui pour le coup est beaucoup plus simple)."}),"\n",(0,s.jsx)(r.p,{children:"Pour son installation avec Docker, il y a diff\xe9rentes fa\xe7on de l'installer. Que ce soit avec le CLI, avec le hub ou encore avec Docker Compose."}),"\n",(0,s.jsx)(r.p,{children:"Vu que l'\xe9quipe de Crafty proposent un fichier docker-compose tout pr\xeat, on va utiliser \xe7a."}),"\n",(0,s.jsx)(r.p,{children:"Voici donc le fichier de configuration de base pour Crafty."}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yml",children:'version: \'3\'\n\nservices:\n  crafty:\n    container_name: crafty_container\n    image: registry.gitlab.com/crafty-controller/crafty-4:latest\n    restart: always\n    environment:\n        - TZ=Etc/UTC\n    ports:\n        - "8443:8443" # HTTPS\n        - "8123:8123" # DYNMAP\n        - "19132:19132/udp" # BEDROCK\n        - "25500-25600:25500-25600" # MC SERV PORT RANGE\n    volumes:\n        - ./docker/backups:/crafty/backups\n        - ./docker/logs:/crafty/logs\n        - ./docker/servers:/crafty/servers\n        - ./docker/config:/crafty/app/config\n        - ./docker/import:/crafty/import\n'})}),"\n",(0,s.jsxs)(r.p,{children:["On va donc cr\xe9er un fichier du nom de ",(0,s.jsx)(r.code,{children:"docker-compose.yml"})," et coller les recommendation des devs dans le fichier."]}),"\n",(0,s.jsx)(r.admonition,{type:"info",children:(0,s.jsx)(r.p,{children:"Bien penser \xe0 changer la time zone en : Etc/Europe.\nJ'ai d\xe9j\xe0 eu des soucis d'horloge en ayant oubli\xe9 de changer ce param\xe8tre."})}),"\n",(0,s.jsxs)(r.p,{children:["On va globalement pas trop toucher \xe0 ce fichier, qui est bien dans l'ensemble. On peut donc lancer docker avec la commande: ",(0,s.jsx)(r.code,{children:"docker-compose up -d && docker-compose logs -f"}),"."]}),"\n",(0,s.jsx)(r.p,{children:"Vu que crafty est bien fait, l'installation va se faire toute seule et prend normalement que quelques secondes"}),"\n",(0,s.jsxs)(r.p,{children:["On peut d'ailleurs voir sur la capture suivante l'installation s'effectuer:\n",(0,s.jsx)(r.img,{alt:"installation de crafty \xe0 l&#39;aide de docker",src:n(8325).A+"",width:"826",height:"514"})]}),"\n",(0,s.jsx)(r.h2,{id:"interface-de-crafty",children:"Interface de Crafty"}),"\n",(0,s.jsx)(r.h3,{id:"premi\xe8re-connexion",children:"Premi\xe8re connexion"}),"\n",(0,s.jsxs)(r.p,{children:["Maintenant que notre installation s'est bien d\xe9roul\xe9e, il est temps d'aller jeter un oeil au niveau de l'interface web.\nCrafty est accessible via ",(0,s.jsx)(r.code,{children:"localhost"}),", ",(0,s.jsx)(r.code,{children:"127.0.0.1"})," ou l'",(0,s.jsx)(r.code,{children:"ip de la machine"}),". Mais toujours avec ",(0,s.jsx)(r.strong,{children:"https://"})," devant.\nPour cet exemple j'y acc\xe8de de avec la mani\xe8re ",(0,s.jsx)(r.code,{children:"https://127.0.0.1:8443/"}),", mais en temps normal, je rentre l'adresse ip du serveur o\xf9 est h\xe9berg\xe9 crafty."]}),"\n",(0,s.jsxs)(r.p,{children:["On se retrouve donc face \xe0 set interface:\n",(0,s.jsx)(r.img,{alt:"page de connexion \xe0 crafty",src:n(3432).A+"",width:"957",height:"813"})]}),"\n",(0,s.jsxs)(r.p,{children:["Pour une premi\xe8re connexion, il faut utiliser le username ",(0,s.jsx)(r.code,{children:"admin"})," et le ",(0,s.jsx)(r.code,{children:"mot de passe"})," g\xe9n\xe9rer dans un fichier situer ici : ",(0,s.jsx)(r.code,{children:"app/config/default-creds.txt"})," de fa\xe7on g\xe9n\xe9ral. Mais bon, vu que je trouvais pas j'ai fini par lanc\xe9 une recherche afin de trouver le fichier, qui finalement \xe9tait pas si loin que \xe7a:\n",(0,s.jsx)(r.img,{alt:"mot de passe de connexion session admin",src:n(5944).A+"",width:"1049",height:"192"})]}),"\n",(0,s.jsx)(r.admonition,{type:"info",children:(0,s.jsx)(r.p,{children:"\xc0 chaque fois que j'ai essay\xe9 d'acc\xe8der au compte admin pour une premi\xe8re connexion, j'ai TOUJOURS un message d'erreur o\xf9 la connexion est impossible. Je sais pas si c'est moi qui suis maudit ou si c'est bugg\xe9 \ud83d\ude2e\u200d\ud83d\udca8."})}),"\n",(0,s.jsxs)(r.p,{children:["Cette fois-ci j'avais un petit peu d'espoir que \xe7a fonctionne, mais comme \xe0 chaque installation, j'ai une erreur ",(0,s.jsx)(r.code,{children:"Incorrect username or password"}),". Donc on va utiliser la m\xe9thode ",(0,s.jsx)(r.code,{children:"Forgot Password"})," qui va activer un compte temporaire qui nous pemettra de d\xe9finir le mot de passe de notre choix pour le compte ",(0,s.jsx)(r.code,{children:"admin"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["Lorsque l'on clic sur le boutton ",(0,s.jsx)(r.code,{children:"Forgot Password"}),", le compte ",(0,s.jsx)(r.code,{children:"Lockout"})," s'active pendant 1H avec un mot de passe temporaire, trouvable dans les logs du container:\n",(0,s.jsx)(r.code,{children:"docker logs {id container}"}),"\n",(0,s.jsx)(r.img,{alt:"login et password du compte auti-lockout",src:n(6087).A+"",width:"877",height:"214"})]}),"\n",(0,s.jsx)(r.p,{children:"Une fois ces identifiants rentr\xe9, cela nous donne donc acc\xe8s \xe0 l'interface permettant de modifier le mot de passe admin."}),"\n",(0,s.jsxs)(r.p,{children:["Voici \xe0 quoi elle ressemble:\n",(0,s.jsx)(r.img,{alt:"page de gestion auti-lockout",src:n(8211).A+"",width:"946",height:"914"})]}),"\n",(0,s.jsx)(r.h3,{id:"dashboard",children:"Dashboard"}),"\n",(0,s.jsx)(r.p,{children:"Maintenant qu'on est connect\xe9, nous voici face \xe0 la page d'accueil. C'est le dashboard.\nD'ici on peut acc\xe9der aux param\xe8tres et cr\xe9er des serveurs.\nSi des serveurs sont cr\xe9es, ils s'afficheront ici."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"dashboard crafty",src:n(8525).A+"",width:"1920",height:"1076"})}),"\n",(0,s.jsx)(r.h3,{id:"cr\xe9ation-dun-serveur",children:"Cr\xe9ation d'un serveur"}),"\n",(0,s.jsxs)(r.p,{children:["Avec Crafty, il est possible de choisir entre un serveur Minecraft Java ou Bedrock.\nChoix \xe0 d\xe9finir en s\xe9lectionnant Minecraft-Bedrock ou Minecraft-Java au dessus du panneau ",(0,s.jsx)(r.strong,{children:"Create New Server"}),"."]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsxs)(r.p,{children:["Voici l'outil qui permet de cr\xe9er des serveurs. Il permet de s\xe9lectionner plusieurs options personnalisable pour notre serveur.\n",(0,s.jsx)(r.img,{alt:"cr\xe9er un nouveau serveur",src:n(747).A+"",width:"805",height:"789"})]}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Server Type"}),": Permet de choisir entre soit la configuration du serveur minecraft ou d'un serveur proxie."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Server Select"}),": au fil des ann\xe9es, plusieurs type de serveur se sont cr\xe9er, ",(0,s.jsx)(r.em,{children:"vanilla"}),", ",(0,s.jsx)(r.em,{children:"paper"}),", ",(0,s.jsx)(r.em,{children:"fabric"}),", ",(0,s.jsx)(r.em,{children:"folia"}),", ",(0,s.jsx)(r.em,{children:"forge-installer"})," et ",(0,s.jsx)(r.em,{children:"purpur"}),". (Paper est recommand\xe9 si l'installation de plugins est souhait\xe9)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Server Version"}),": s\xe9lectionne la version du jeu sur lequel le serveur doit tourner."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Server Name"}),": Nom que vous souhaitez donner au serveur (obvious celui-ci\u261d\ud83e\udd13)."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Minimum/Maximum Memory, Server Port"}),": D\xe9termine la minimum et le maximum de ram que vous souhaitez allouer au serveur. Vivement recommand\xe9 de mettre au minimum 2Go et 6Go au max pour une ",(0,s.jsx)(r.strong,{children:"bonne"})," utilisation entre ami."]}),"\n"]}),"\n",(0,s.jsx)(r.admonition,{type:"warning",children:(0,s.jsxs)(r.p,{children:["Bien penser \xe0 changer le port, des bots qui scannent les ports Minecraft sont fr\xe9quent. Exemple: Remplacer ",(0,s.jsx)(r.strong,{children:"25565"})," par ",(0,s.jsx)(r.strong,{children:"25570"}),"."]})}),"\n",(0,s.jsx)(r.h3,{id:"d\xe9marrage-du-serveur",children:"D\xe9marrage du serveur"}),"\n",(0,s.jsxs)(r.p,{children:["On peut maintenant d\xe9marrer le serveur en cliquant sur le bouton '",(0,s.jsx)(r.strong,{children:"Start"}),"' ou depuis le dashboard en appuyant sur le petit triangle.\nSi c'est le premier d\xe9marrage du serveur, il va demander d'accepter les ",(0,s.jsx)(r.a,{href:"https://www.minecraft.net/fr-fr/eula",children:"EULA de Minecraft"}),"."]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.img,{alt:"EULA Minecraft",src:n(8247).A+"",width:"509",height:"243"})}),"\n",(0,s.jsx)(r.p,{children:"Une fois les EULA accept\xe9e on peut une nouvelle fois lancer le serveur et s'assurer de bien avoir ouvert le port d\xe9fini plus haut qui est le port de connexion Minecraft et qui permettra \xe0 vos amis de se connecter \xe0 votre serveur."}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.p,{children:"Et voil\xe0, vous savez \xe0 pr\xe9sent installer Crafty Controller avec Docker et lancer votre premier serveur Minecraft !"})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},5944:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/passwd-2d3d94cdb30d97e212c71c8dfdd2c189.png"},6087:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/lockout-ce6159ea02b5c3f40c417b8f4578a1e5.png"},8211:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/ath_lockout-9757686d883665488146f3fe2877c51b.png"},8247:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/minecraft-eula-4dea04ebacd635114e15e5dbd1349dc7.png"},8325:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/docker1-f25fc15ce766e66f39a21ce805ce6ae6.png"},8453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>o});var i=n(6540);const s={},t=i.createContext(s);function a(e){const r=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:r},e.children)}},8525:(e,r,n)=>{n.d(r,{A:()=>i});const i=n.p+"assets/images/interface_crafty-354f5ee81469d6ac19612bd63178b4aa.png"}}]);